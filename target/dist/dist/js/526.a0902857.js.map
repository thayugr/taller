{"version":3,"file":"js/526.a0902857.js","mappings":"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","sources":["webpack://web/./src/api/role/sysRole.js","webpack://web/./src/views/role/index.vue","webpack://web/./src/views/role/index.vue?2b7c","webpack://web/./src/views/role/editRole.vue","webpack://web/./src/views/role/editRole.vue?cedd","webpack://web/./src/views/role/authorizeRole.vue","webpack://web/./src/views/role/authorizeRole.vue?a655"],"sourcesContent":["import request from \"../../utils/request\";\r\n\r\n/**\r\n * Obtener lista de roles\r\n * @param params\r\n * @returns {AxiosPromise}\r\n */\r\nexport function getRoleList(params){\r\n    return request({\r\n        url: '/api/sys/role/table',\r\n        method: 'get',\r\n        params\r\n    })\r\n}\r\n\r\n/**\r\n * Editar rol\r\n * @param data\r\n * @returns {AxiosPromise}\r\n */\r\nexport function editRole(data){\r\n    return request({\r\n        url: '/api/sys/role/edit',\r\n        method: 'post',\r\n        data\r\n    })\r\n}\r\n\r\n/**\r\n *Autorización de rol\r\n * @param data\r\n * @returns {AxiosPromise}\r\n */\r\nexport function authorizeRole(data){\r\n    return request({\r\n        url: '/api/sys/role/menu/edit',\r\n        method: 'post',\r\n        data\r\n    })\r\n}\r\n\r\n/**\r\n * Eliminar rol\r\n * @param params\r\n * @returns {AxiosPromise}\r\n */\r\nexport function delRole(params){\r\n    return request({\r\n        url: '/api/sys/role/del',\r\n        method: 'delete',\r\n        params\r\n    })\r\n}\r\n\r\n/**\r\n * Obtener el menú de rol autorizado\r\n * @param params\r\n * @returns {AxiosPromise}\r\n */\r\nexport function getMenusByRoleId(params){\r\n    return request({\r\n        url: '/api/sys/role/menu/list',\r\n        method: 'get',\r\n        params\r\n    })\r\n}","<template>\r\n  <div>\r\n    <div class=\"searchDiv\">\r\n      <el-input class=\"searchInput\" v-model=\"state.blurry\" placeholder=\"Por favor ingrese un nombre o código de rol\" clearable></el-input>\r\n      <el-button type=\"primary\" @click=\"getRoleListFun\">Consulta</el-button>\r\n      <el-button v-if=\"hasPer('role:add')\" @click=\"editRoleFun\" style=\"float: right;\">Nuevo</el-button>\r\n    </div>\r\n    <el-table :data=\"state.tableData\" row-key=\"id\" border height=\"calc(100vh - 180px)\" max-height=\"calc(100vh - 180px)\">\r\n      <el-table-column label=\"Numero de Serie\" type=\"index\" width=\"60\"></el-table-column>\r\n      <el-table-column label=\"Nombre del personaje\" prop=\"roleName\"></el-table-column>\r\n      <el-table-column label=\"Codigo de Rol\" prop=\"roleCode\"></el-table-column>\r\n      <el-table-column label=\"Descripcion del Rol\" prop=\"description\"></el-table-column>\r\n      <el-table-column label=\"Funcionar\" prop=\"option\" width=\"220px\" align=\"center\">\r\n        <template #default=\"scope\">\r\n          <el-button v-if=\"hasPer('role:authorize')\" type=\"success\" @click=\"authorizeRoleFun(scope.row.id)\">Autorizar</el-button>\r\n          <el-button v-if=\"hasPer('role:edit')\" type=\"primary\" @click=\"editRoleFun(JSON.parse(JSON.stringify(scope.row)))\">Editar</el-button>\r\n          <el-button v-if=\"hasPer('role:del')\" type=\"danger\" @click=\"delRoleFun(scope.row.id, scope.row.roleName)\">Borrar</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!--Editar-->\r\n    <edit-role v-model:dialog-visible=\"dialogVisible\" :role-obj=\"state.roleObj\" @get-list=\"getRoleListFun\"></edit-role>\r\n    <!--Autorizar-->\r\n    <authorize-role v-model:auth-visible=\"authVisible\" :role-id=\"state.roleId\"></authorize-role>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport editRole from \"./editRole\";\r\nimport authorizeRole from \"./authorizeRole\";\r\nimport {getRoleList, delRole} from \"../../api/role/sysRole\";\r\nimport {errorMsg, infoMsg, successMsg} from \"../../utils/message\";\r\nimport {hasPer} from \"../../utils/common\";\r\nimport {onMounted, reactive, ref} from \"vue\";\r\nimport {ElMessageBox} from \"element-plus\";\r\n\r\nconst state = reactive({\r\n  blurry: '',\r\n  tableData: [],\r\n  roleId: null,\r\n  roleObj: {},\r\n})\r\n\r\nconst dialogVisible = ref(false)\r\n\r\nconst authVisible = ref(false)\r\n\r\nonMounted(() => {\r\n  getRoleListFun()\r\n})\r\n\r\n//  Obtener lista de roles\r\nconst getRoleListFun = () => {\r\n  getRoleList({blurry: state.blurry}).then(res => {\r\n    if (res.success){\r\n      state.tableData = res.data\r\n    } else {\r\n      errorMsg(res.msg)\r\n    }\r\n  })\r\n}\r\n//  Editar Rol\r\nconst editRoleFun = (row) => {\r\n  dialogVisible.value = true\r\n  state.roleObj = row.id ? row : {}\r\n}\r\n// Autorizacion de Rol\r\nconst authorizeRoleFun = (id) => {\r\n  authVisible.value = true\r\n  state.roleId = id\r\n}\r\n// Eliminar Rol\r\nconst delRoleFun = (id, name) => {\r\n  ElMessageBox.confirm('Confirmar para eliminar rol 【'+name+'】？', 'Pista', {\r\n    confirmButtonText: 'Seguro',\r\n    cancelButtonText: 'Cancelar',\r\n    type: 'warning'\r\n  }).then(() => {\r\n    delRole({id: id}).then(res => {\r\n      if (res.success){\r\n        successMsg(res.data)\r\n        getRoleListFun()\r\n      } else {\r\n        errorMsg(res.msg)\r\n      }\r\n    })\r\n  }).catch(() => {\r\n    infoMsg('operacion cancelada')\r\n  })\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <el-dialog :title=\"state.title\" v-model=\"visible\" draggable :close-on-click-modal=\"false\" @opened=\"openFun\">\r\n    <el-form :model=\"state.roleForm\" :rules=\"rules\" ref=\"roleRef\" label-width=\"120px\">\r\n      <el-form-item v-show=\"false\" prop=\"id\">\r\n        <el-input v-model=\"state.roleForm.id\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"Nombre del personaje\" prop=\"roleName\">\r\n        <el-input v-model=\"state.roleForm.roleName\" placeholder=\"Por favor ingrese un nombre de rol\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"Codigo de Rol\" prop=\"roleCode\">\r\n        <el-input v-model=\"state.roleForm.roleCode\" placeholder=\"Por favor ingrese el código de rol\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"Descripción del rol\" prop=\"roleIds\">\r\n        <el-input type=\"textarea\" v-model=\"state.roleForm.description\" aria-placeholder=\"Por favor ingrese una descripción del rol\"></el-input>\r\n      </el-form-item>\r\n    </el-form>\r\n    <template #footer>\r\n      <span>\r\n      <el-button @click=\"resetForm(roleRef)\">reiniciar</el-button>\r\n      <el-button type=\"primary\" :loading=\"isLoading\" @click=\"submitRole\">seguro</el-button>\r\n    </span>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script setup>\r\nimport {editRole} from \"../../api/role/sysRole\";\r\nimport {errorMsg, successMsg} from \"../../utils/message\";\r\nimport {computed, reactive, ref} from \"vue\";\r\nimport {resetForm} from \"../../utils/common\";\r\n\r\nconst props = defineProps({\r\n  dialogVisible: {\r\n    type: Boolean,\r\n    require: true,\r\n    default: false\r\n  },\r\n  roleObj: Object\r\n})\r\n\r\nconst emit = defineEmits(['update:dialogVisible', 'get-list'])\r\n\r\nconst visible = computed({\r\n  get: () => props.dialogVisible,\r\n  set: (val) => emit('update:dialogVisible', val)\r\n})\r\n\r\nconst isLoading = ref(false)\r\n\r\nconst state = reactive({\r\n  title: 'Nuevo',\r\n  roleForm: {\r\n    id: null,\r\n    roleName: '',\r\n    roleCode: '',\r\n    description: ''\r\n  },\r\n  rules: {\r\n    roleName: [{required: true, message: 'El nombre del rol no puede estar vacío', trigger: 'blur'}],\r\n    roleCode: [{required: true, message: 'El código de rol no puede estar vacío', trigger: 'blur'}]\r\n  }\r\n})\r\n\r\nconst roleRef = ref()\r\n\r\nconst openFun = () => {\r\n  resetForm(roleRef.value)\r\n  state.title = 'Nuevo'\r\n  isLoading.value = false\r\n  if (props.roleObj.id){\r\n    state.title = 'Editar'\r\n    state.roleForm = props.roleObj\r\n  }\r\n}\r\n//  Entregar\r\nconst submitRole = () => {\r\n  roleRef.value.validate((valid) => {\r\n    if (valid){\r\n      isLoading.value = true\r\n      editRole(state.roleForm).then(res => {\r\n        if (res.success){\r\n          successMsg(res.data)\r\n          visible.value = false\r\n          emit('get-list')\r\n        } else {\r\n          errorMsg(res.msg)\r\n        }\r\n        isLoading.value = false\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n :deep(.vue-treeselect__control){\r\n  height: 28px;\r\n}\r\n :deep(.el-form-item__content){\r\n   line-height: 28px;\r\n   font-size: 12px;\r\n }\r\n</style>","import script from \"./editRole.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./editRole.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./editRole.vue?vue&type=style&index=0&id=32befa84&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-32befa84\"]])\n\nexport default __exports__","<template>\r\n  <el-dialog title=\"Autorizar\" v-model=\"visible\" draggable :close-on-click-modal=\"false\" @opened=\"openFun\">\r\n    <el-tree\r\n        :data=\"state.treeData\"\r\n        ref=\"tree\"\r\n        show-checkbox\r\n        node-key=\"id\"\r\n        :props=\"state.defaultProps\"\r\n        default-expand-all\r\n        :default-checked-keys=\"state.authorizeData\">\r\n    </el-tree>\r\n    <template #footer>\r\n      <span>\r\n      <el-button @click=\"visible = false\">Cancelar</el-button>\r\n      <el-button type=\"primary\" :loading=\"isLoading\" @click=\"submitAuthorize\">Autorizar</el-button>\r\n    </span>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script setup>\r\nimport {getMenuTable} from \"../../api/menu/sysMenu\";\r\nimport {getMenusByRoleId, authorizeRole} from \"../../api/role/sysRole\";\r\nimport {errorMsg, successMsg} from \"../../utils/message\";\r\nimport {computed, reactive, ref} from \"vue\";\r\n\r\nconst props = defineProps({\r\n  authVisible: {\r\n    type: Boolean,\r\n    require: true,\r\n    default: false\r\n  },\r\n  roleId: Number\r\n})\r\n\r\nconst emit = defineEmits(['update:authVisible'])\r\n\r\nconst visible = computed({\r\n  get: () => props.authVisible,\r\n  set: (val) => emit('update:authVisible', val)\r\n})\r\n\r\nconst isLoading = ref(false)\r\n\r\nconst tree = ref()\r\n\r\nconst state = reactive({\r\n  treeData: [],\r\n  authorizeData: [],\r\n  defaultProps: {\r\n    children: 'children',\r\n    label: 'name'\r\n  }\r\n})\r\n\r\nconst openFun = () => {\r\n  isLoading.value = false\r\n  state.authorizeData = []\r\n  getMenusByRoleIdFun()\r\n}\r\n//  Obtener todos los árboles de menú del personaje actual\r\nconst getMenuTree = () => {\r\n  getMenuTable({}).then(res => {\r\n    if (res.success){\r\n      state.treeData = res.data\r\n    } else {\r\n      errorMsg(res.msg)\r\n    }\r\n  })\r\n}\r\n//  Obtener la lista de menú autorizada por el rol actual\r\nconst getMenusByRoleIdFun = () => {\r\n  getMenusByRoleId({roleId: props.roleId}).then(res => {\r\n    if (res.success){\r\n      if (res.data && res.data.length > 0){\r\n        res.data.forEach(item => {\r\n          state.authorizeData.push(item.menuId)\r\n        })\r\n      }\r\n      //  El retardador se utiliza principalmente para representar el menú autorizado. El tiempo de retardo se puede ajustar según la situación específica.\r\n      setTimeout(() => {\r\n        getMenuTree()\r\n      }, 10)\r\n    } else {\r\n      errorMsg(res.msg)\r\n    }\r\n  })\r\n}\r\n//  Entregar\r\nconst submitAuthorize = () => {\r\n  isLoading.value = true\r\n  authorizeRole({roleId: props.roleId, menuIds: tree.value.getCheckedKeys()}).then(res => {\r\n    if (res.success){\r\n      successMsg(res.data)\r\n      visible.value = false\r\n    } else {\r\n      errorMsg(res.msg)\r\n    }\r\n    isLoading.value = false\r\n  })\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import script from \"./authorizeRole.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./authorizeRole.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["getRoleList","params","request","url","method","editRole","data","authorizeRole","delRole","getMenusByRoleId","state","reactive","blurry","tableData","roleId","roleObj","dialogVisible","ref","authVisible","onMounted","getRoleListFun","then","res","success","errorMsg","msg","editRoleFun","row","value","id","authorizeRoleFun","delRoleFun","name","ElMessageBox","confirm","confirmButtonText","cancelButtonText","type","successMsg","catch","infoMsg","_createElementBlock","_createElementVNode","_hoisted_1","_createVNode","_component_el_input","class","$event","placeholder","clearable","_component_el_button","onClick","_cache","_unref","hasPer","_createBlock","style","_component_el_table","border","height","_component_el_table_column","label","width","prop","align","default","_withCtx","scope","JSON","parse","stringify","roleName","onGetList","__exports__","props","__props","emit","__emit","visible","computed","get","set","val","isLoading","title","roleForm","roleCode","description","rules","required","message","trigger","roleRef","openFun","resetForm","submitRole","validate","valid","_component_el_dialog","draggable","onOpened","footer","loading","_component_el_form","model","_ctx","_component_el_form_item","tree","treeData","authorizeData","defaultProps","children","getMenusByRoleIdFun","getMenuTree","getMenuTable","length","forEach","item","push","menuId","setTimeout","submitAuthorize","menuIds","getCheckedKeys","_component_el_tree"],"sourceRoot":""}