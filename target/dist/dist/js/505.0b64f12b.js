"use strict";(self["webpackChunkweb"]=self["webpackChunkweb"]||[]).push([[505],{1505:function(e,t,o){o.r(t),o.d(t,{default:function(){return W}});o(4645);var n=o(4220),a=o(6732),r=o(9216),i=o(9538),l=o(6381);function u(e){return(0,l.A)({url:"/api/auth/login",method:"post",data:e})}function s(e){return(0,l.A)({url:"/api/auth/code",method:"get",params:e})}var c=o(7939);const d={style:{display:"flex","justify-content":"space-between","align-items":"center"},class:"q-mb-md"};var m={__name:"login",setup(e){const t=(0,r.P)(),o=(0,a.KR)(!0),l=(0,a.KR)(!1),m=(0,a.Kh)({image:""}),g=(0,a.Kh)({username:"",password:"",code:"",uuid:""});(0,n.sV)(()=>{v()});const v=()=>{s().then(e=>{m.image=e.img,g.uuid=e.uuid})},p=()=>{g.username&&g.password&&g.code&&(l.value=!0,u(g).then(e=>{e.success?(t.token=e.data.token,t.refreshToken=e.data.refreshToken,t.userInfo=e.data.userDto,i.A.push({path:"/Layout"})):(0,c.aJ)(e.msg),l.value=!1}))};return(e,t)=>{const a=(0,n.g2)("q-banner"),r=(0,n.g2)("q-card-section"),i=(0,n.g2)("q-input"),u=(0,n.g2)("q-img"),s=(0,n.g2)("q-btn"),c=(0,n.g2)("q-form"),f=(0,n.g2)("q-card"),h=(0,n.g2)("q-dialog");return(0,n.uX)(),(0,n.Wv)(h,{modelValue:o.value,"onUpdate:modelValue":t[3]||(t[3]=e=>o.value=e),persistent:""},{default:(0,n.k6)(()=>[(0,n.bF)(f,{class:"q-mb-md",style:{"min-width":"300px","max-width":"400px"}},{default:(0,n.k6)(()=>[(0,n.bF)(r,null,{default:(0,n.k6)(()=>[(0,n.bF)(a,null,{default:(0,n.k6)(()=>[...t[4]||(t[4]=[(0,n.Lk)("div",{class:"text-h6"},"Gestion 2024",-1),(0,n.Lk)("div",{class:"text-h6"},"Inicio de Sesion de Usuario",-1)])]),_:1})]),_:1}),(0,n.bF)(r,null,{default:(0,n.k6)(()=>[(0,n.bF)(c,{onSubmit:p},{default:(0,n.k6)(()=>[(0,n.bF)(i,{modelValue:g.username,"onUpdate:modelValue":t[0]||(t[0]=e=>g.username=e),label:"Nombre de usuario",rules:[e=>!!e||"El nombre de usuario no puede estar vacío"],"prepend-icon":"person",class:"q-mb-md"},null,8,["modelValue","rules"]),(0,n.bF)(i,{modelValue:g.password,"onUpdate:modelValue":t[1]||(t[1]=e=>g.password=e),type:"password",label:"Contraseña",rules:[e=>!!e||"La contraseña no puede estar vacía"],"prepend-icon":"lock",class:"q-mb-md"},null,8,["modelValue","rules"]),(0,n.Lk)("div",d,[(0,n.bF)(i,{modelValue:g.code,"onUpdate:modelValue":t[2]||(t[2]=e=>g.code=e),label:"Código de verificación",rules:[e=>!!e||"El código de verificación no puede estar vacío"],"prepend-icon":"fingerprint",style:{width:"70%"}},null,8,["modelValue","rules"]),(0,n.bF)(u,{src:m.image,onClick:v,class:"cursor-pointer",style:{width:"30%"}},null,8,["src"])]),(0,n.bF)(s,{type:"submit",label:"Acceso",color:"primary",loading:l.value,class:"full-width"},null,8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},g=o(1317),v=o(7438),p=o(3663),f=o(7180),h=o(9140),b=o(5471),y=o(1952),S=(0,h.a0)({name:"QBanner",props:{...b.C,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(e,{slots:t}){const{proxy:{$q:o}}=(0,n.nI)(),a=(0,b.A)(e,o),r=(0,n.EW)(()=>"q-banner row items-center"+(!0===e.dense?" q-banner--dense":"")+(!0===a.value?" q-banner--dark q-dark":"")+(!0===e.rounded?" rounded-borders":"")),i=(0,n.EW)(()=>"q-banner__actions row items-center justify-end col-"+(!0===e.inlineActions?"auto":"all"));return()=>{const o=[(0,n.h)("div",{class:"q-banner__avatar col-auto row items-center self-start"},(0,y.zm)(t.avatar)),(0,n.h)("div",{class:"q-banner__content col text-body2"},(0,y.zm)(t.default))],a=(0,y.zm)(t.action);return void 0!==a&&o.push((0,n.h)("div",{class:i.value},a)),(0,n.h)("div",{class:r.value+(!1===e.inlineActions&&void 0!==a?" q-banner--top-padding":""),role:"alert"},o)}}}),q=o(3483),_=o(4985),k=o(9798),w=o(6119),A=o(1030);const V={ratio:[String,Number]};function x(e,t){return(0,n.EW)(()=>{const o=Number(e.ratio||(void 0!==t?t.value:void 0));return!0!==isNaN(o)&&o>0?{paddingBottom:100/o+"%"}:null})}var F=o(3246),B=o(5952);const E=1.7778;var C=(0,h.a0)({name:"QImg",props:{...V,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:E},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:t,emit:o}){const r=(0,a.KR)(e.initialRatio),i=x(e,r),l=(0,n.nI)(),{registerTimeout:u,removeTimeout:s}=(0,B.A)(),{registerTimeout:c,removeTimeout:d}=(0,B.A)(),m=(0,n.EW)(()=>void 0!==e.placeholderSrc?{src:e.placeholderSrc}:null),g=(0,n.EW)(()=>void 0!==e.errorSrc?{src:e.errorSrc,__qerror:!0}:null),v=[(0,a.KR)(null),(0,a.KR)(m.value)],p=(0,a.KR)(0),f=(0,a.KR)(!1),h=(0,a.KR)(!1),b=(0,n.EW)(()=>`q-img q-img--${!0===e.noNativeMenu?"no-":""}menu`),S=(0,n.EW)(()=>({width:e.width,height:e.height})),q=(0,n.EW)(()=>"q-img__image "+(void 0!==e.imgClass?e.imgClass+" ":"")+`q-img__image--with${!0===e.noTransition?"out":""}-transition q-img__image--`),_=(0,n.EW)(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function V(){d(),0!==e.loadingShowDelay?c(()=>{f.value=!0},e.loadingShowDelay):f.value=!0}function E(){d(),f.value=!1}function C({target:e}){!1===(0,F.rU)(l)&&(s(),r.value=0===e.naturalHeight?.5:e.naturalWidth/e.naturalHeight,R(e,1))}function R(e,t){1e3!==t&&!0!==(0,F.rU)(l)&&(!0===e.complete?z(e):u(()=>{R(e,t+1)},50))}function z(e){!0!==(0,F.rU)(l)&&(p.value=1^p.value,v[p.value].value=null,E(),"true"!==e.getAttribute("__qerror")&&(h.value=!1),o("load",e.currentSrc||e.src))}function K(e){s(),E(),h.value=!0,v[p.value].value=g.value,v[1^p.value].value=m.value,o("error",e)}function Q(t){const o=v[t].value,a={key:"img_"+t,class:q.value,style:_.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...o};return p.value===t?Object.assign(a,{class:a.class+"current",onLoad:C,onError:K}):a.class+="loaded",(0,n.h)("div",{class:"q-img__container absolute-full",key:"img"+t},(0,n.h)("img",a))}function W(){return!1===f.value?(0,n.h)("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},(0,y.zm)(t[!0===h.value?"error":"default"])):(0,n.h)("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},void 0!==t.loading?t.loading():!0===e.noSpinner?void 0:[(0,n.h)(w.A,{color:e.spinnerColor,size:e.spinnerSize})])}{function I(){(0,n.wB)(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,e=>{s(),h.value=!1,null===e?(E(),v[1^p.value].value=m.value):V(),v[p.value].value=e},{immediate:!0})}!0===A.ot.value?(0,n.sV)(I):I()}return()=>{const t=[];return null!==i.value&&t.push((0,n.h)("div",{key:"filler",style:i.value})),null!==v[0].value&&t.push(Q(0)),null!==v[1].value&&t.push(Q(1)),t.push((0,n.h)(k.eB,{name:"q-transition--fade"},W)),(0,n.h)("div",{key:"main",class:b.value,style:S.value,role:"img","aria-label":e.alt},t)}}}),R=o(407),z=o(2110),K=o.n(z);const Q=(0,g.A)(m,[["__scopeId","data-v-6631f11c"]]);var W=Q;K()(m,"components",{QDialog:v.A,QCard:p.A,QCardSection:f.A,QBanner:S,QForm:q.A,QInput:_.A,QImg:C,QBtn:R.A})},3483:function(e,t,o){o(4645),o(4564),o(324),o(5765);var n=o(4220),a=o(6732),r=o(9140),i=o(5055),l=o(5139),u=o(1952),s=o(3430),c=o(3246);t.A=(0,r.a0)({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:t,emit:o}){const r=(0,n.nI)(),d=(0,a.KR)(null);let m=0;const g=[];function v(t){const n="boolean"===typeof t?t:!0!==e.noErrorFocus,a=++m,r=(e,t)=>{o("validation"+(!0===e?"Success":"Error"),t)},i=e=>{const t=e.validate();return"function"===typeof t.then?t.then(t=>({valid:t,comp:e}),t=>({valid:!1,comp:e,err:t})):Promise.resolve({valid:t,comp:e})},l=!0===e.greedy?Promise.all(g.map(i)).then(e=>e.filter(e=>!0!==e.valid)):g.reduce((e,t)=>e.then(()=>i(t).then(e=>{if(!1===e.valid)return Promise.reject(e)})),Promise.resolve()).catch(e=>[e]);return l.then(e=>{if(void 0===e||0===e.length)return a===m&&r(!0),!0;if(a===m){const{comp:t,err:o}=e[0];if(void 0!==o&&console.error(o),r(!1,t),!0===n){const t=e.find(({comp:e})=>"function"===typeof e.focus&&!1===(0,c.rU)(e.$));void 0!==t&&t.comp.focus()}}return!1})}function p(){m++,g.forEach(e=>{"function"===typeof e.resetValidation&&e.resetValidation()})}function f(t){void 0!==t&&(0,i.Gu)(t);const n=m+1;v().then(a=>{n===m&&!0===a&&(void 0!==e.onSubmit?o("submit",t):void 0!==t?.target&&"function"===typeof t.target.submit&&t.target.submit())})}function h(t){void 0!==t&&(0,i.Gu)(t),o("reset"),(0,n.dY)(()=>{p(),!0===e.autofocus&&!0!==e.noResetFocus&&b()})}function b(){(0,l.Gy)(()=>{if(null===d.value)return;const e=d.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||d.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||d.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(d.value.querySelectorAll("[tabindex]"),e=>-1!==e.tabIndex);e?.focus({preventScroll:!0})})}(0,n.Gt)(s.q3,{bindComponent(e){g.push(e)},unbindComponent(e){const t=g.indexOf(e);-1!==t&&g.splice(t,1)}});let y=!1;return(0,n.Y4)(()=>{y=!0}),(0,n.n)(()=>{!0===y&&!0===e.autofocus&&b()}),(0,n.sV)(()=>{!0===e.autofocus&&b()}),Object.assign(r.proxy,{validate:v,resetValidation:p,submit:f,reset:h,focus:b,getValidationComponents:()=>g}),()=>(0,n.h)("form",{class:"q-form",ref:d,onSubmit:f,onReset:h},(0,u.zm)(t.default))}})}}]);
//# sourceMappingURL=505.0b64f12b.js.map