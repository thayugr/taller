{"version":3,"file":"js/513.3650b863.js","mappings":"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","sources":["webpack://web/./src/components/Pagination.vue","webpack://web/./src/components/Pagination.vue?39f5","webpack://web/./src/api/role/sysRole.js","webpack://web/./src/views/user/editUser.vue","webpack://web/./src/views/user/editUser.vue?9d15","webpack://web/./src/views/user/index.vue","webpack://web/./src/views/user/index.vue?8566"],"sourcesContent":["<template>\r\n  <el-pagination\r\n      @size-change=\"handleSizeChange\"\r\n      @current-change=\"handleCurrentChange\"\r\n      :current-page=\"currentPage\"\r\n      :page-sizes=\"[10, 20, 50, 100, 200, 500, 1000]\"\r\n      :page-size=\"pageSize\"\r\n      layout=\"total, sizes, prev, pager, next, jumper\"\r\n      :total=\"totalSize\">\r\n  </el-pagination>\r\n</template>\r\n\r\n<script setup>\r\nimport {computed} from \"vue\";\r\n\r\nconst props = defineProps({\r\n  current: {\r\n    type: Number,\r\n    default: 1\r\n  },\r\n  size: {\r\n    type: Number,\r\n    default: 10\r\n  },\r\n  total: {\r\n    type: Number,\r\n    default: 0\r\n  }\r\n})\r\n\r\nconst emit = defineEmits(['update:current', 'update:size', 'get-list'])\r\n\r\nlet currentPage = computed({\r\n  get: () => props.current,\r\n  set: (val) => emit('update:current', val)\r\n})\r\n\r\nlet pageSize = computed({\r\n  get: () => props.size,\r\n  set: (val) => emit('update:size', val)\r\n})\r\n\r\nconst totalSize = computed(() => {\r\n  return props.total\r\n})\r\n\r\n//  Modificar el número de elementos por página\r\nconst handleSizeChange = (val) => {\r\n  pageSize.value = val\r\n  emit('get-list')\r\n}\r\n//  Modificar el número de página actual\r\nconst handleCurrentChange = (val) => {\r\n  currentPage.value = val\r\n  emit('get-list')\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import script from \"./Pagination.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Pagination.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import request from \"../../utils/request\";\r\n\r\n/**\r\n * Obtener lista de roles\r\n * @param params\r\n * @returns {AxiosPromise}\r\n */\r\nexport function getRoleList(params){\r\n    return request({\r\n        url: '/api/sys/role/table',\r\n        method: 'get',\r\n        params\r\n    })\r\n}\r\n\r\n/**\r\n * Editar rol\r\n * @param data\r\n * @returns {AxiosPromise}\r\n */\r\nexport function editRole(data){\r\n    return request({\r\n        url: '/api/sys/role/edit',\r\n        method: 'post',\r\n        data\r\n    })\r\n}\r\n\r\n/**\r\n *Autorización de rol\r\n * @param data\r\n * @returns {AxiosPromise}\r\n */\r\nexport function authorizeRole(data){\r\n    return request({\r\n        url: '/api/sys/role/menu/edit',\r\n        method: 'post',\r\n        data\r\n    })\r\n}\r\n\r\n/**\r\n * Eliminar rol\r\n * @param params\r\n * @returns {AxiosPromise}\r\n */\r\nexport function delRole(params){\r\n    return request({\r\n        url: '/api/sys/role/del',\r\n        method: 'delete',\r\n        params\r\n    })\r\n}\r\n\r\n/**\r\n * Obtener el menú de rol autorizado\r\n * @param params\r\n * @returns {AxiosPromise}\r\n */\r\nexport function getMenusByRoleId(params){\r\n    return request({\r\n        url: '/api/sys/role/menu/list',\r\n        method: 'get',\r\n        params\r\n    })\r\n}","<template>\r\n  <el-dialog :title=\"state.title\" v-model=\"visible\" :close-on-click-modal=\"false\" @opened=\"openFun\">\r\n    <el-form :model=\"state.userForm\" :rules=\"state.rules\" ref=\"userRef\" label-width=\"120px\">\r\n      <el-form-item v-show=\"false\" prop=\"id\">\r\n        <el-input v-model=\"state.userForm.id\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"nombre de usuario\" prop=\"username\">\r\n        <el-input v-model=\"state.userForm.username\" placeholder=\"Por favor ingrese el nombre de usuario\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"Apoodo\" prop=\"nickName\">\r\n        <el-input v-model=\"state.userForm.nickName\" placeholder=\"Por favor ingresa un apodo\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"rol de usuario\" prop=\"roleIds\">\r\n        <el-select v-model=\"state.userForm.roleIds\" multiple placeholder=\"Por favor seleccione un rol\">\r\n          <el-option v-for=\"(item, index) in state.roleList\" :key=\"index\" :label=\"item.roleName\" :value=\"parseInt(item.id)\"></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n    </el-form>\r\n    <template #footer>\r\n      <span>\r\n      <el-button @click=\"resetForm(userRef)\">reiniciar</el-button>\r\n      <el-button type=\"primary\" :loading=\"isLoading\" @click=\"submitUser\">seguro</el-button>\r\n    </span>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script setup>\r\nimport {editUser} from \"../../api/user/sysUser\";\r\nimport {getRoleList} from \"../../api/role/sysRole\";\r\nimport {errorMsg, successMsg} from \"../../utils/message\";\r\nimport {resetForm} from \"../../utils/common\";\r\nimport {computed, reactive, ref} from \"vue\";\r\n\r\nconst props = defineProps({\r\n  dialogVisible: {\r\n    type: Boolean,\r\n    required: true,\r\n    default: false\r\n  },\r\n  userObj: Object\r\n})\r\n\r\nconst emit = defineEmits(['update:dialogVisible', 'get-list'])\r\n\r\nconst visible = computed({\r\n  get: () => props.dialogVisible,\r\n  set: (val) => emit('update:dialogVisible', val)\r\n})\r\n\r\nconst isLoading = ref(false)\r\n\r\nconst userRef = ref()\r\n\r\nconst state = reactive({\r\n  title: 'Nuevo',\r\n  userForm: {\r\n    id: null,\r\n    username: '',\r\n    nickName: '',\r\n    roleIds: []\r\n  },\r\n  rules: {\r\n    username: [{required: true, message: 'El nombre de usuario no puede estar vacío', trigger: 'blur'}],\r\n    nickName: [{required: true, message: 'El apodo del usuario no puede estar vacío', trigger: 'blur'}],\r\n    roleIds: [{required: true, message: 'El rol de usuario no puede estar vacío', trigger: 'change'}]\r\n  },\r\n  roleList: []\r\n})\r\n\r\nconst openFun = () => {\r\n  resetForm(userRef.value)\r\n  state.title = 'Nuevo'\r\n  getRoleListFun()\r\n  isLoading.value = false\r\n  if (props.userObj.id){\r\n    state.title = 'Editar'\r\n    state.userForm = props.userObj\r\n    state.userForm.roleIds = state.userForm.roleIds[0].split(',')\r\n    // Convertir números de cadena en roleIds a números\r\n    state.userForm.roleIds = state.userForm.roleIds.map(Number)\r\n  }\r\n}\r\n//  Obtener lista de roles\r\nconst getRoleListFun = () => {\r\n  getRoleList({}).then(res => {\r\n    if (res.success){\r\n      state.roleList = res.data\r\n    } else {\r\n      errorMsg(res.msg)\r\n    }\r\n  })\r\n}\r\n//  Entregar\r\nconst submitUser = () => {\r\n  console.log('INSERTAR');\r\n  userRef.value.validate((valid) => {\r\n    if (valid){\r\n      isLoading.value = true\r\n      editUser(state.userForm).then(res => {\r\n        if (res.success){\r\n          successMsg(res.data)\r\n          console.log(res.data)\r\n          visible.value = false\r\n          emit('get-list')\r\n        } else {\r\n          errorMsg(res.msg)\r\n        }\r\n        isLoading.value = false\r\n      })\r\n    }\r\n  })\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n :deep(.vue-treeselect__control){\r\n  height: 28px;\r\n}\r\n :deep(.el-form-item__content){\r\n   line-height: 28px;\r\n   font-size: 12px;\r\n }\r\n</style>","import script from \"./editUser.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./editUser.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./editUser.vue?vue&type=style&index=0&id=a24c4b0e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-a24c4b0e\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <div class=\"searchDiv\">\r\n      <el-input class=\"searchInput\" v-model=\"state.blurry\" placeholder=\"Por favor ingrese nombre de usuario o apodo\" clearable></el-input>\r\n      <el-button type=\"primary\" @click=\"getUserListFun\">Consulta</el-button>\r\n      <el-button v-if=\"hasPer('user:add')\" @click=\"editUserFun\" style=\"float: right;\">Nuevo</el-button>\r\n    </div>\r\n    <el-table :data=\"state.tableData\" row-key=\"id\" border>\r\n      <el-table-column label=\"nombre de usuario\" prop=\"username\"></el-table-column>\r\n      <el-table-column label=\"Apodo\" prop=\"nickName\"></el-table-column>\r\n      <el-table-column label=\"Role\" prop=\"roles\"></el-table-column>\r\n      <el-table-column label=\"Estado\" prop=\"enabled\" width=\"100\">\r\n        <template #default=\"scope\">\r\n          <el-tag v-if=\"scope.row.enabled\" type=\"success\">permitir</el-tag>\r\n          <el-tag v-else type=\"danger\">desactivar</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"funcionar\" prop=\"option\" width=\"220px\" align=\"center\">\r\n        <template #default=\"scope\">\r\n          <span v-if=\"scope.row.username !== state.username\">\r\n            <el-button v-if=\"hasPer('user:enabled')\" :type=\"buttonType(scope.row.enabled)\"\r\n                       @click=\"enabledUserFun(JSON.parse(JSON.stringify(scope.row)))\">\r\n              {{scope.row.enabled ? 'desactivar' : 'permitir'}}</el-button>\r\n            <el-button v-if=\"hasPer('user:edit')\" type=\"primary\" @click=\"editUserFun(JSON.parse(JSON.stringify(scope.row)))\">editar</el-button>\r\n            <el-button v-if=\"hasPer('user:del')\" type=\"danger\" @click=\"deleteUser(scope.row.id, scope.row.username)\">borrar</el-button>\r\n          </span>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!--paginacion-->\r\n    <pagination \r\n    v-model:current=\"state.current\" \r\n    v-model:size=\"state.size\" \r\n    v-model:total=\"state.total\" \r\n    @get-list=\"getUserListFun\">\r\n  </pagination>\r\n    <!--editar-->\r\n    <edit-user v-model:dialog-visible=\"dialogVisible\" :user-obj=\"state.userObj\" @get-list=\"getUserListFun\"></edit-user>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport editUser from \"./editUser\";\r\nimport Pagination from \"../../components/Pagination\";\r\nimport {getUserList, delUser, enabledUser} from \"../../api/user/sysUser\";\r\nimport {errorMsg, infoMsg, successMsg} from \"../../utils/message\";\r\nimport {hasPer} from \"../../utils/common\";\r\nimport {useStore} from \"../../store\";\r\nimport {onMounted, reactive, ref} from \"vue\";\r\nimport {ElMessageBox} from \"element-plus\";\r\n\r\nconst store = useStore()\r\n\r\nconst state = reactive({\r\n  blurry: '',\r\n  username: store.userInfo.username,\r\n  tableData: [],\r\n  userObj: {},\r\n  current: 1,\r\n  size: 10,\r\n  total: 0\r\n})\r\n\r\nconst dialogVisible = ref(false)\r\n\r\nonMounted(() => {\r\n  getUserListFun()\r\n})\r\n\r\nconst getUserListFun = () => {\r\n  const params = {\r\n    blurry: state.blurry,\r\n    size: state.size,\r\n    currentPage: state.current\r\n  }\r\n  getUserList(params).then(res => {\r\n    if (res.success){\r\n      state.tableData = res.data.records\r\n      state.total = res.data.total\r\n    }\r\n  })\r\n}\r\n\r\nconst editUserFun = (row) => {\r\n  dialogVisible.value = true\r\n  state.userObj = row.id ? row : {}\r\n}\r\n\r\nconst deleteUser = (id, username) => {\r\n  ElMessageBox.confirm('Confirmar para eliminar usuario 【' + username + '】？', 'pista', {\r\n    confirmButtonText: 'Seguro',\r\n    cancelButtonText: 'Cancelar',\r\n    type: 'warning'\r\n  }).then(() => {\r\n    delUser({id: id}).then(res => {\r\n      if (res.success){\r\n        successMsg(res.data)\r\n        getUserListFun()\r\n      } else {\r\n        errorMsg(res.msg)\r\n      }\r\n    })\r\n  }).catch(() => {\r\n    infoMsg('Operacion Cancelada')\r\n  })\r\n}\r\n//  Activar/desactivar usuarios\r\nconst enabledUserFun = (row) => {\r\n  row.enabled = !row.enabled\r\n  const str = row.enabled ? 'permitir' : 'desactivar'\r\n  const color = row.enabled ? '#67C23A' : '#F56C6C'\r\n  ElMessageBox.confirm('Seguro <span style=\"color: '+color+'\">' + str + '</span>usuario【' + row.nickName + '】？', 'pista', {\r\n    confirmButtonText: 'Seguro',\r\n    cancelButtonText: 'Cancelar',\r\n    type: 'warning',\r\n    dangerouslyUseHTMLString: true\r\n  }).then(() => {\r\n    enabledUser(row).then(res => {\r\n      if (res.success){\r\n        successMsg(res.data)\r\n        getUserListFun()\r\n      } else {\r\n        errorMsg(res.msg)\r\n      }\r\n    })\r\n  }).catch(() => {\r\n    infoMsg('Operacion Cancelada')\r\n  })\r\n}\r\n\r\nconst buttonType = (type) => {\r\n  if (type){\r\n    return 'warning'\r\n  } else {\r\n    return 'success'\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["props","__props","emit","__emit","currentPage","computed","get","current","set","val","pageSize","size","totalSize","total","handleSizeChange","value","handleCurrentChange","_createBlock","_component_el_pagination","onSizeChange","onCurrentChange","_unref","layout","__exports__","getRoleList","params","request","url","method","editRole","data","authorizeRole","delRole","getMenusByRoleId","visible","dialogVisible","isLoading","ref","userRef","state","reactive","title","userForm","id","username","nickName","roleIds","rules","required","message","trigger","roleList","openFun","resetForm","getRoleListFun","userObj","split","map","Number","then","res","success","errorMsg","msg","submitUser","console","log","validate","valid","editUser","successMsg","_component_el_dialog","$event","onOpened","footer","_withCtx","_createElementVNode","_createVNode","_component_el_button","onClick","_cache","type","loading","_component_el_form","model","_component_el_form_item","prop","_component_el_input","label","placeholder","_component_el_select","multiple","_createElementBlock","_Fragment","_renderList","item","index","_component_el_option","key","roleName","parseInt","store","useStore","blurry","userInfo","tableData","onMounted","getUserListFun","getUserList","records","editUserFun","row","deleteUser","ElMessageBox","confirm","confirmButtonText","cancelButtonText","delUser","catch","infoMsg","enabledUserFun","enabled","str","color","dangerouslyUseHTMLString","enabledUser","buttonType","_hoisted_1","class","clearable","hasPer","style","_component_el_table","border","_component_el_table_column","width","default","scope","_component_el_tag","align","_hoisted_2","JSON","parse","stringify","Pagination","onGetList"],"sourceRoot":""}