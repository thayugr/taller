"use strict";(self["webpackChunkweb"]=self["webpackChunkweb"]||[]).push([[586],{655:function(e,t,a){a.d(t,{D3:function(){return l},Hz:function(){return d},hh:function(){return r},mg:function(){return n},yH:function(){return o}});var u=a(6381);function r(e){return(0,u.A)({url:"/api/sys/role/table",method:"get",params:e})}function l(e){return(0,u.A)({url:"/api/sys/role/edit",method:"post",data:e})}function n(e){return(0,u.A)({url:"/api/sys/role/menu/edit",method:"post",data:e})}function o(e){return(0,u.A)({url:"/api/sys/role/del",method:"delete",params:e})}function d(e){return(0,u.A)({url:"/api/sys/role/menu/list",method:"get",params:e})}},9586:function(e,t,a){a.r(t),a.d(t,{default:function(){return i}});a(4645),a(4564),a(4329);var u=a(4220),r=a(3503),l=a(655),n=a(7939),o=a(6732),d={__name:"authorizeRole",props:{authVisible:{type:Boolean,require:!0,default:!1},roleId:Number},emits:["update:authVisible"],setup(e,{emit:t}){const a=e,d=t,s=(0,u.EW)({get:()=>a.authVisible,set:e=>d("update:authVisible",e)}),i=(0,o.KR)(!1),c=(0,o.KR)(),h=(0,o.Kh)({treeData:[],authorizeData:[],defaultProps:{children:"children",label:"name"}}),p=()=>{i.value=!1,h.authorizeData=[],m()},f=()=>{(0,r.Yd)({}).then(e=>{e.success?h.treeData=e.data:(0,n.aJ)(e.msg)})},m=()=>{(0,l.Hz)({roleId:a.roleId}).then(e=>{e.success?(e.data&&e.data.length>0&&e.data.forEach(e=>{h.authorizeData.push(e.menuId)}),setTimeout(()=>{f()},10)):(0,n.aJ)(e.msg)})},k=()=>{i.value=!0,(0,l.mg)({roleId:a.roleId,menuIds:c.value.getCheckedKeys()}).then(e=>{e.success?((0,n.j3)(e.data),s.value=!1):(0,n.aJ)(e.msg),i.value=!1})};return(e,t)=>{const a=(0,u.g2)("el-tree"),r=(0,u.g2)("el-button"),l=(0,u.g2)("el-dialog");return(0,u.uX)(),(0,u.Wv)(l,{title:"Autorizar",modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=e=>s.value=e),draggable:"","close-on-click-modal":!1,onOpened:p},{footer:(0,u.k6)(()=>[(0,u.Lk)("span",null,[(0,u.bF)(r,{onClick:t[0]||(t[0]=e=>s.value=!1)},{default:(0,u.k6)(()=>[...t[2]||(t[2]=[(0,u.eW)("Cancelar",-1)])]),_:1}),(0,u.bF)(r,{type:"primary",loading:i.value,onClick:k},{default:(0,u.k6)(()=>[...t[3]||(t[3]=[(0,u.eW)("Autorizar",-1)])]),_:1},8,["loading"])])]),default:(0,u.k6)(()=>[(0,u.bF)(a,{data:h.treeData,ref_key:"tree",ref:c,"show-checkbox":"","node-key":"id",props:h.defaultProps,"default-expand-all":"","default-checked-keys":h.authorizeData},null,8,["data","props","default-checked-keys"])]),_:1},8,["modelValue"])}}};const s=d;var i=s}}]);
//# sourceMappingURL=586.b5771ef3.js.map